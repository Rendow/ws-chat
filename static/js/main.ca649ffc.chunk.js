(this["webpackJsonpws-vol"]=this["webpackJsonpws-vol"]||[]).push([[0],{50:function(e,a,t){},51:function(e,a,t){},57:function(e,a,t){"use strict";t.r(a);var s=t(0),n=t(38),c=t.n(n),r=(t(50),t(51),t(16)),i=t(12),o=t(8),l=t.n(o),m=t(78),d=t.p+"static/media/square_320_431787d41442021a815067689754243d.ef24912b.jpg",g=t(42),j=t(76),u=t(1);var h=function(){var e=Object(s.useState)(null),a=Object(i.a)(e,2),t=a[0],n=a[1],c=Object(s.useState)("pending"),o=Object(i.a)(c,2),g=o[0],j=o[1],h=Object(s.useState)([]),v=Object(i.a)(h,2),f=v[0],p=v[1],O=function(){console.log("close ws"),j("close")},x=function(){console.log("open ws"),j("ready")},N=function(e){console.log("Error: ",e)},w=function(e){var a={message:e.data,time:(new Date).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),local:!1};p((function(e){return[].concat(Object(r.a)(e),[a])}))};return Object(s.useEffect)((function(){f.length>0&&localStorage.setItem("messages",JSON.stringify(f));var e=document.getElementById("chat");e&&(e.scrollTop=e.scrollHeight)}),[f]),Object(s.useEffect)((function(){var e=localStorage.getItem("messages");e&&p(JSON.parse(e));var a=new WebSocket("wss://ws.qexsystems.ru");return a.addEventListener("open",x),a.addEventListener("message",w),a.addEventListener("close",O),a.addEventListener("error",N),n(a),function(){t&&(t.removeEventListener("close",O),t.addEventListener("open",x),t.addEventListener("message",w),t.addEventListener("error",N))}}),[]),Object(u.jsxs)("div",{className:l.a.chatWrap,children:[Object(u.jsxs)("div",{className:l.a.header,children:[Object(u.jsx)(m.a,{sx:{width:40,height:40,position:"absolute",left:22,top:12},src:d}),Object(u.jsxs)("span",{className:l.a.name,style:{flex:"1"},children:[" ","First name + Last name"]})]}),Object(u.jsx)(_,{messages:f}),Object(u.jsx)(b,{readyStatus:g,setMessages:p,sendMessage:function(e){t&&t.send(e)}})]})};function _(e){var a=e.messages;return Object(u.jsx)("div",{id:"chat",className:l.a.messages,children:a.map((function(e,a){return Object(u.jsx)(v,{local:e.local,time:e.time,message:e.message},a)}))})}function v(e){var a=e.message,t=e.time,s=e.local,n=s?l.a.messageWrap+" "+l.a.localMessageWrap:l.a.messageWrap;return Object(u.jsxs)("div",{className:n,children:[!s&&Object(u.jsx)("div",{className:l.a.avatar,children:Object(u.jsx)(m.a,{sx:{width:54,height:54},src:d})}),Object(u.jsxs)("div",{className:l.a.messageInfo,children:[Object(u.jsxs)("div",{className:l.a.nameWrap,children:[!s&&Object(u.jsxs)("span",{className:l.a.name,style:{flex:"1"},children:[" ","First name + Last name"]}),Object(u.jsxs)("span",{className:l.a.message,children:[" ",a]})]}),Object(u.jsxs)("div",{className:l.a.time,children:[" ",t]})]})]})}function b(e){var a=e.setMessages,t=e.sendMessage,n=e.readyStatus,c=Object(s.useState)(""),o=Object(i.a)(c,2),m=o[0],d=o[1],h=navigator.onLine,_=m?l.a.icon+" "+l.a.activeIcon:l.a.icon;return Object(u.jsxs)("div",{className:l.a.formGroup,children:[!h&&Object(u.jsx)(j.a,{className:l.a.alert,severity:"warning",children:"App working in offline mod, check the internet connection"}),Object(u.jsx)("textarea",{disabled:"ready"!==n||!h,placeholder:"Enter text message...",className:l.a.textarea,value:m,onChange:function(e){d(e.currentTarget.value)}}),Object(u.jsx)(g.a,{className:_,onClick:function(){m&&(t(m),function(e){var t={message:e,time:(new Date).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),local:!0};a((function(e){return[].concat(Object(r.a)(e),[t])}))}(m),d(""))}})]})}var f=function(){return Object(u.jsx)("div",{className:"container",children:Object(u.jsx)(h,{})})};c.a.render(Object(u.jsx)(f,{}),document.getElementById("root")),function(){var e="".concat("/ws-vol","/sw.js");navigator.serviceWorker.register(e).then((function(e){console.log(e)}))}()},8:function(e,a,t){e.exports={chatWrap:"Chat_chatWrap__11kVs",header:"Chat_header__MPBOD",name:"Chat_name__2IkWV",messages:"Chat_messages__2jibP",messageWrap:"Chat_messageWrap__1PNqZ",avatar:"Chat_avatar__2KZPp",messageInfo:"Chat_messageInfo__x0gq_",nameWrap:"Chat_nameWrap__21dOh",message:"Chat_message__3F4BL",time:"Chat_time__2n_jF",localMessageWrap:"Chat_localMessageWrap__1Yygx",formGroup:"Chat_formGroup__1Jci6",alert:"Chat_alert__2QT2J",textarea:"Chat_textarea__1PViJ",icon:"Chat_icon__ERiI9",activeIcon:"Chat_activeIcon__V6A3w"}}},[[57,1,2]]]);
//# sourceMappingURL=main.ca649ffc.chunk.js.map