(this["webpackJsonpws-vol"]=this["webpackJsonpws-vol"]||[]).push([[0],{2:function(e,a,s){e.exports={chatWrap:"Chat_chatWrap__11kVs",header:"Chat_header__MPBOD",name:"Chat_name__2IkWV",messages:"Chat_messages__2jibP",messageWrap:"Chat_messageWrap__1PNqZ",avatar:"Chat_avatar__2KZPp",messageInfo:"Chat_messageInfo__x0gq_",nameWrap:"Chat_nameWrap__21dOh",message:"Chat_message__3F4BL",time:"Chat_time__2n_jF",localMessageWrap:"Chat_localMessageWrap__1Yygx",formGroup:"Chat_formGroup__1Jci6",textarea:"Chat_textarea__1PViJ",icon:"Chat_icon__ERiI9",activeIcon:"Chat_activeIcon__V6A3w"}},22:function(e,a,s){},23:function(e,a,s){},30:function(e,a,s){"use strict";s.r(a);var t=s(0),n=s(14),c=s.n(n),r=(s(22),s(23),s(4)),i=s(5),o=s(2),l=s.n(o),m=s(38),d=s.p+"static/media/square_320_431787d41442021a815067689754243d.ef24912b.jpg",g=s(16),j=s(1);var u=function(){var e=Object(t.useState)(null),a=Object(i.a)(e,2),s=a[0],n=a[1],c=Object(t.useState)("pending"),o=Object(i.a)(c,2),g=o[0],u=o[1],_=Object(t.useState)([]),b=Object(i.a)(_,2),f=b[0],p=b[1],O=function(){console.log("close ws"),u("close")},x=function(){console.log("open ws"),u("ready")},N=function(e){console.log("Error: ",e)},C=function(e){var a={message:e.data,time:(new Date).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),local:!1};p((function(e){return[].concat(Object(r.a)(e),[a])}))};return Object(t.useEffect)((function(){f.length>0&&localStorage.setItem("messages",JSON.stringify(f));var e=document.getElementById("chat");e&&(e.scrollTop=e.scrollHeight)}),[f]),Object(t.useEffect)((function(){var e=localStorage.getItem("messages");e&&p(JSON.parse(e));var a=new WebSocket("wss://ws.qexsystems.ru");return a.addEventListener("open",x),a.addEventListener("message",C),a.addEventListener("close",O),a.addEventListener("error",N),n(a),function(){s&&(s.removeEventListener("close",O),s.addEventListener("open",x),s.addEventListener("message",C),s.addEventListener("error",N))}}),[]),Object(j.jsxs)("div",{className:l.a.chatWrap,children:[Object(j.jsxs)("div",{className:l.a.header,children:[Object(j.jsx)(m.a,{sx:{width:40,height:40,position:"absolute",left:22,top:12},src:d}),Object(j.jsxs)("span",{className:l.a.name,style:{flex:"1"},children:[" ","First name + Last name"]})]}),Object(j.jsx)(h,{messages:f}),Object(j.jsx)(v,{readyStatus:g,setMessages:p,sendMessage:function(e){s&&s.send(e)}})]})};function h(e){var a=e.messages;return Object(j.jsx)("div",{id:"chat",className:l.a.messages,children:a.map((function(e,a){return Object(j.jsx)(_,{local:e.local,time:e.time,message:e.message},a)}))})}function _(e){var a=e.message,s=e.time,t=e.local,n=t?l.a.messageWrap+" "+l.a.localMessageWrap:l.a.messageWrap;return Object(j.jsxs)("div",{className:n,children:[!t&&Object(j.jsx)("div",{className:l.a.avatar,children:Object(j.jsx)(m.a,{sx:{width:54,height:54},src:d})}),Object(j.jsxs)("div",{className:l.a.messageInfo,children:[Object(j.jsxs)("div",{className:l.a.nameWrap,children:[!t&&Object(j.jsxs)("span",{className:l.a.name,style:{flex:"1"},children:[" ","First name + Last name"]}),Object(j.jsxs)("span",{className:l.a.message,children:[" ",a]})]}),Object(j.jsxs)("div",{className:l.a.time,children:[" ",s]})]})]})}function v(e){var a=e.setMessages,s=e.sendMessage,n=e.readyStatus,c=Object(t.useState)(""),o=Object(i.a)(c,2),m=o[0],d=o[1],u=m?l.a.icon+" "+l.a.activeIcon:l.a.icon;return Object(j.jsxs)("div",{className:l.a.formGroup,children:[Object(j.jsx)("textarea",{placeholder:"Enter text message...",className:l.a.textarea,value:m,onChange:function(e){d(e.currentTarget.value)}}),Object(j.jsx)(g.a,{className:u,disabled:"ready"!==n,onClick:function(){m&&(s(m),function(e){var s={message:e,time:(new Date).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),local:!0};a((function(e){return[].concat(Object(r.a)(e),[s])}))}(m),d(""))}})]})}var b=function(){return Object(j.jsx)("div",{className:"container",children:Object(j.jsx)(u,{})})};c.a.render(Object(j.jsx)(b,{}),document.getElementById("root")),function(){var e="".concat("/ws-vol","/sw.js");navigator.serviceWorker.register(e).then((function(e){console.log(e)}))}()}},[[30,1,2]]]);
//# sourceMappingURL=main.608cea37.chunk.js.map